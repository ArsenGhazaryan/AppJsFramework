<script type="text/javascript" src="phonegap.js"></script>

<link href='http://fonts.googleapis.com/css?family=Roboto' rel='stylesheet' type='text/css'>

<link href="http://dev.appjsframework.com/css/app.css" media="screen" rel="stylesheet" type="text/css" />
<link href="http://dev.appjsframework.com/css/app.console.css" media="screen" rel="stylesheet" type="text/css" />
<link href="http://dev.appjsframework.com/css/app.icons.css" media="screen" rel="stylesheet" type="text/css" />
<link href="http://dev.appjsframework.com/css/app.spinner.css" media="screen" rel="stylesheet" type="text/css" />
<link href="http://dev.appjsframework.com/css/app.dialog.css" media="screen" rel="stylesheet" type="text/css" />
<link href="http://dev.appjsframework.com/css/app.slider.css" media="screen" rel="stylesheet" type="text/css" />


<script src="http://dev.appjsframework.com/lib/jquery.min.js"></script>
<script src="http://dev.appjsframework.com/lib/iscroll.js"></script>
<script src="http://dev.appjsframework.com/js/app.js"></script>
<script src="http://dev.appjsframework.com/js/app.console.js"></script>
<script src="http://dev.appjsframework.com/js/app.dom.js"></script>
<script src="http://dev.appjsframework.com/js/app.utils.js"></script>
<script src="http://dev.appjsframework.com/js/app.view.js"></script>
<script src="http://dev.appjsframework.com/js/app.sidepanel.js"></script>
<script src="http://dev.appjsframework.com/js/app.scroller.js"></script>
<script src="http://dev.appjsframework.com/js/app.spinner.js"></script>
<script src="http://dev.appjsframework.com/js/app.dialog.js"></script>
<script src="http://dev.appjsframework.com/js/app.slider.js"></script>

<button id="btnRefresh" style="position:absolute;z-index:100; right:20px; bottom:20px;" onclick="location.reload(true)"><span class="appicon appicon-refresh"></span> RELOAD</button>
<button id="btnConsole" style="position:absolute;z-index:100; right:135px; bottom:20px;" onclick="appconsole.show()">CONSOLE</button>

<div class="app-view" id="main-view" data-url="home" data-swipeleftsp="true">
	<ul class="view-header">
		<li class="button" id="testBtn" onclick="app.sidepanels.left.toggle()"><span class="appicon appicon-align-justify"></span> Menu</li>
	</ul>
    <div class="view-body">
    	<div class="view-body-inner">
	    	<h1>App JS Framework</h1>
	    	<p>AppJsFramework is a high performance, small footprint, dependency free, multi-platform HTML5/JavaScript framework for building awesome native looking mobile apps.</p>
			<p>By using AppJS Framework, you will achieve native-like UI for your hybrid mobile apps built with PhoneGap, all while using the same core skillset you have as a web developer â€“ pure JavaScript and HTML5</p>
    	</div>
    </div>
</div>

<div class="app-sidepanel app-sidepanel-left" id="main-sidepanel" data-position="left">
	<div class="app-sidepanel-inner">
		<ul class="sidepanel-menu">
			<li class="menu-title">UI Components</li>
			<li onclick="app.navigate('#home')">Home</li>
			<li onclick="app.navigate('#scroller')">Scroller</li>
			<li onclick="app.navigate('#sidepanels')">Sidepanels</li>
			<li onclick="app.navigate('#spinner')">Spinner</li>
			<li onclick="app.navigate('#dialogs')">Dialogs</li>
			<li onclick="app.navigate('#slider')">Slider</li>
			<li onclick="app.navigate('#home')">Tabs</li>
			<li onclick="app.navigate('#home')">Buttons</li>
			<li onclick="app.navigate('#home')">List View</li>
			<li onclick="app.navigate('#home')">Text Inputs</li>
			<li onclick="app.navigate('#home')">Checkboxes</li>
			<li onclick="app.navigate('#home')">Radiobuttons</li>
			<li onclick="app.navigate('#home')">Switcher</li>
			<li onclick="app.navigate('#home')">Dropdown</li>
			<li onclick="app.navigate('#home')">Progress</li>
			<li onclick="app.navigate('#home')">Icons</li>
			<li onclick="app.navigate('#home')">Console</li>
			<li onclick="app.navigate('#home')">Themes</li>
		</ul>
	</div>
</div>

<div class="app-sidepanel app-sidepanel-right" id="right-sidepanel" data-position="right">
	<div class="app-sidepanel-inner">
			<ul class="sidepanel-menu">
				<li class="menu-title">Right Sidepanel</li>
			</ul>
	</div>
</div>


<script>
var app = new App();
app.init();

document.getElementById('btnRefresh').enableTap();
document.getElementById('btnConsole').enableTap();

var i = 20;

function onScrollTest(e) {
	//var pos = app.currentView.scroller.getScrollPosition();
	
	// console.log(pos);
}


function getNewContent() {
	var content = '';
	for(i=20; i<200; i++) {
		content = content + '<strong>('+i+').</strong> line ....<br/>';
	}
	return content;
}

function ajaxTest() {
	var settings = {
		json: false,
		spinner: true,
		callback: function(data) {
			alert(data);
		}
	}
	app.ajax('http://dev.appjsframework.com/api.php', settings);
}


function testConsole() {
	for(var i=0; i<100; i++) {
		appconsole.log(new Date().getTime()+' ! ');
	}
}

//////////////////////////////////////////////////////////////////////////////

var pushNotification;
pushNotification = window.plugins.pushNotification;

appconsole.log('push register... ');
appconsole.log('platform: '+device.platform);
if ( device.platform == 'android' || device.platform == 'Android' )
{
	appconsole.log('push: android');
    pushNotification.register(
        successHandler,
        errorHandler, {
            "senderID":"542821323293",
            "ecb":"onNotificationGCM"
        });
}
else
{
    pushNotification.register(
        tokenHandler,
        errorHandler, {
            "badge":"true",
            "sound":"true",
            "alert":"true",
            "ecb":"onNotificationAPN"
        });
}


function successHandler (result) {
    alert('result = ' + result);
}


function errorHandler (error) {
    alert('error = ' + error);
}



function tokenHandler (result) {
    // Your iOS push server needs to know the token before it can push to this device
    // here is where you might want to send it the token for later use.
    alert('device token = ' + result);
}




// iOS
function onNotificationAPN (event) {
    if ( event.alert )
    {
        navigator.notification.alert(event.alert);
    }

    if ( event.sound )
    {
        var snd = new Media(event.sound);
        snd.play();
    }

    if ( event.badge )
    {
        pushNotification.setApplicationIconBadgeNumber(successHandler, errorHandler, event.badge);
    }
}

// Android
function onNotificationGCM(e) {
	appconsole.log('onNotificationGCM');
	appconsole.log('EVENT -> RECEIVED:' + e.event);

    switch( e.event )
    {
    case 'registered':
        if ( e.regid.length > 0 )
        {
            appconsole.log('REGISTERED -> REGID:' + e.regid);
            // Your GCM push server needs to know the regID before it can push to this device
            // here is where you might want to send it the regID for later use.
            appconsole.log("regID = " + e.regid);
        }
    break;

    case 'message':
        // if this flag is set, this notification happened while we were in the foreground.
        // you might want to play a sound to get the user's attention, throw up a dialog, etc.
        if ( e.foreground )
        {
            appconsole.log('INLINE NOTIFICATION--');

            // if the notification contains a soundname, play it.
            var my_media = new Media("/android_asset/www/"+e.soundname);
            my_media.play();
        }
        else
        {  // otherwise we were launched because the user touched a notification in the notification tray.
            if ( e.coldstart )
            {
                appconsole.log('COLDSTART NOTIFICATION');
            }
            else
            {
                appconsole.log('BACKGROUND NOTIFICATION');
            }
        }

        appconsole.log('MESSAGE -> MSG: ' + e.payload.message);
        appconsole.log('MESSAGE -> MSGCNT: ' + e.payload.msgcnt);
    break;

    case 'error':
        appconsole.log('ERROR -> MSG:' + e.msg);
    break;

    default:
        appconsole.log('EVENT -> Unknown, an event was received and we do not know what it is');
    break;
  }
}

</script>
 